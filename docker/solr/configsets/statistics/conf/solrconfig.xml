<?xml version="1.0" encoding="UTF-8" ?>
<config>
  <!-- DSpace Statistics Core Configuration -->

  <!-- Solr Configuration for DSpace Statistics -->
  <luceneMatchVersion>9.8.0</luceneMatchVersion>

  <!-- Data Directory -->
  <dataDir>${solr.data.dir:}</dataDir>

  <!-- Directory Factory -->
  <directoryFactory
    name="DirectoryFactory"
    class="${solr.directoryFactory:solr.NRTCachingDirectoryFactory}"
  />

  <!-- Codec Factory -->
  <codecFactory class="solr.SchemaCodecFactory" />

  <!-- Schema Factory -->
  <schemaFactory class="ClassicIndexSchemaFactory" />

  <!-- Request Handlers -->
  <requestHandler name="/select" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <int name="rows">10</int>
      <str name="df">text</str>
    </lst>
  </requestHandler>

  <requestHandler name="/query" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <str name="wt">json</str>
      <str name="indent">true</str>
      <str name="df">text</str>
    </lst>
  </requestHandler>

  <requestHandler name="/get" class="solr.RealTimeGetHandler">
    <lst name="defaults">
      <str name="omitHeader">true</str>
    </lst>
  </requestHandler>

  <!-- Update Request Handler -->
  <requestHandler
    name="/update"
    class="solr.UpdateRequestHandler"
    startup="lazy"
  />

  <!-- Analysis Request Handler -->
  <requestHandler
    name="/analysis/field"
    startup="lazy"
    class="solr.FieldAnalysisRequestHandler"
  />

  <!-- Document Analysis Request Handler -->
  <requestHandler
    name="/analysis/document"
    startup="lazy"
    class="solr.DocumentAnalysisRequestHandler"
  />

  <!-- Query Response Writer -->
  <queryResponseWriter name="json" class="solr.JSONResponseWriter">
    <str name="content-type">text/plain; charset=UTF-8</str>
  </queryResponseWriter>

  <!-- Update Log -->
  <updateLog>
    <str name="dir">${solr.ulog.dir:}</str>
  </updateLog>

  <!-- Auto Commit -->
  <autoCommit>
    <maxTime>15000</maxTime>
    <maxDocs>10000</maxDocs>
  </autoCommit>

  <!-- Auto Soft Commit -->
  <autoSoftCommit>
    <maxTime>1000</maxTime>
  </autoSoftCommit>

  <!-- Commit Within -->
  <commitWithin>
    <softCommit>false</softCommit>
  </commitWithin>
</config>
