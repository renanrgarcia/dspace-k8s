<?xml version="1.0" encoding="UTF-8" ?>
<schema name="dspace-authority" version="1.6">
  <!-- DSpace Authority Schema -->

  <!-- Field Type Definitions -->
  <fieldType
    name="string"
    class="solr.StrField"
    sortMissingLast="true"
    docValues="true"
  />
  <fieldType
    name="boolean"
    class="solr.BoolField"
    sortMissingLast="true"
    docValues="true"
  />
  <fieldType
    name="int"
    class="solr.TrieIntField"
    precisionStep="0"
    positionIncrementGap="0"
    docValues="true"
  />
  <fieldType
    name="long"
    class="solr.TrieLongField"
    precisionStep="0"
    positionIncrementGap="0"
    docValues="true"
  />
  <fieldType
    name="float"
    class="solr.TrieFloatField"
    precisionStep="0"
    positionIncrementGap="0"
    docValues="true"
  />
  <fieldType
    name="double"
    class="solr.TrieDoubleField"
    precisionStep="0"
    positionIncrementGap="0"
    docValues="true"
  />
  <fieldType
    name="date"
    class="solr.TrieDateField"
    precisionStep="0"
    positionIncrementGap="0"
    docValues="true"
  />

  <!-- Text Field Types -->
  <fieldType
    name="text_general"
    class="solr.TextField"
    positionIncrementGap="100"
  >
    <analyzer type="index">
      <tokenizer class="solr.StandardTokenizerFactory" />
      <filter
        class="solr.StopFilterFactory"
        ignoreCase="true"
        words="stopwords.txt"
        enablePositionIncrements="true"
      />
      <filter class="solr.LowerCaseFilterFactory" />
      <filter class="solr.SnowballPorterFilterFactory" language="English" />
    </analyzer>
    <analyzer type="query">
      <tokenizer class="solr.StandardTokenizerFactory" />
      <filter
        class="solr.StopFilterFactory"
        ignoreCase="true"
        words="stopwords.txt"
        enablePositionIncrements="true"
      />
      <filter
        class="solr.SynonymGraphFilterFactory"
        synonyms="synonyms.txt"
        ignoreCase="true"
        expand="true"
      />
      <filter class="solr.LowerCaseFilterFactory" />
      <filter class="solr.SnowballPorterFilterFactory" language="English" />
    </analyzer>
  </fieldType>

  <fieldType name="text_ws" class="solr.TextField" positionIncrementGap="100">
    <analyzer>
      <tokenizer class="solr.WhitespaceTokenizerFactory" />
    </analyzer>
  </fieldType>

  <!-- Field Definitions -->
  <!-- Core Authority Fields -->
  <field
    name="id"
    type="string"
    indexed="true"
    stored="true"
    required="true"
    multiValued="false"
  />
  <field
    name="authority"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="value"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="field"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="confidence"
    type="int"
    indexed="true"
    stored="true"
    multiValued="false"
  />

  <!-- Authority Information -->
  <field
    name="authority_type"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="authority_source"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="authority_identifier"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />

  <!-- Name Authority Fields -->
  <field
    name="first_name"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="last_name"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="full_name"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="name_variants"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="true"
  />

  <!-- Organization Authority Fields -->
  <field
    name="organization_name"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="organization_acronym"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="organization_type"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="organization_country"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="organization_city"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />

  <!-- Subject Authority Fields -->
  <field
    name="subject_term"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="subject_hierarchy"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <field
    name="subject_broader"
    type="string"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <field
    name="subject_narrower"
    type="string"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <field
    name="subject_related"
    type="string"
    indexed="true"
    stored="true"
    multiValued="true"
  />

  <!-- Geographic Authority Fields -->
  <field
    name="geographic_name"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="geographic_type"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="geographic_coordinates"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="geographic_country"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="geographic_region"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />

  <!-- Temporal Authority Fields -->
  <field
    name="temporal_period"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="temporal_start"
    type="date"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="temporal_end"
    type="date"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="temporal_era"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />

  <!-- Language Authority Fields -->
  <field
    name="language_code"
    type="string"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="language_name"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="language_native"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />

  <!-- Metadata Fields -->
  <field
    name="created"
    type="date"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="modified"
    type="date"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="deprecated"
    type="boolean"
    indexed="true"
    stored="true"
    multiValued="false"
  />
  <field
    name="deprecation_reason"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="false"
  />

  <!-- Text Field for General Search -->
  <field
    name="text"
    type="text_general"
    indexed="true"
    stored="false"
    multiValued="true"
  />

  <!-- Copy Fields for Search -->
  <copyField source="value" dest="text" />
  <copyField source="first_name" dest="text" />
  <copyField source="last_name" dest="text" />
  <copyField source="full_name" dest="text" />
  <copyField source="name_variants" dest="text" />
  <copyField source="organization_name" dest="text" />
  <copyField source="organization_acronym" dest="text" />
  <copyField source="subject_term" dest="text" />
  <copyField source="subject_hierarchy" dest="text" />
  <copyField source="geographic_name" dest="text" />
  <copyField source="temporal_period" dest="text" />
  <copyField source="language_name" dest="text" />
  <copyField source="language_native" dest="text" />

  <!-- Dynamic Fields -->
  <dynamicField
    name="*_txt"
    type="text_general"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <dynamicField
    name="*_str"
    type="string"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <dynamicField
    name="*_int"
    type="int"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <dynamicField
    name="*_long"
    type="long"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <dynamicField
    name="*_float"
    type="float"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <dynamicField
    name="*_double"
    type="double"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <dynamicField
    name="*_date"
    type="date"
    indexed="true"
    stored="true"
    multiValued="true"
  />
  <dynamicField
    name="*_bool"
    type="boolean"
    indexed="true"
    stored="true"
    multiValued="true"
  />

  <!-- Unique Key -->
  <uniqueKey>id</uniqueKey>

  <!-- Similarity -->
  <similarity class="org.apache.lucene.search.similarities.BM25Similarity" />
</schema>
